function moving_average(e){var t=[];return function(n){t.push(n);t.length>e&&t.splice(0,1);var r=0;for(var i in t)r+=t[i];var s=e;t.length<e&&(s=t.length);return r/s}}function clamp(e){return Math.max(Math.min(e,1),0)}function goggles(e){var t=document.getElementById("goggleLeft"),n=document.getElementById("goggleRight");t.style.marginTop=-27*e+"px";t.style.marginLeft=4*e+"px";t.style.webkitTransform="scaleY("+(1-.25*e)+") rotate("+ -20*e+"deg)";t.style.mozTransform="scaleY("+(1-.25*e)+") rotate("+ -20*e+"deg)";t.style.oTransform="scaleY("+(1-.25*e)+") rotate("+ -20*e+"deg)";t.style.transform="scaleY("+(1-.25*e)+") rotate("+ -20*e+"deg)";n.style.marginTop=-27*e+"px";n.style.marginLeft=-4*e+"px";n.style.webkitTransform="scaleY("+(1-.25*e)+") rotate("+20*e+"deg)";n.style.mozTransform="scaleY("+(1-.25*e)+") rotate("+20*e+"deg)";n.style.oTransform="scaleY("+(1-.25*e)+") rotate("+20*e+"deg)";n.style.transform="scaleY("+(1-.25*e)+") rotate("+20*e+"deg)"}function avatar(e){var t=(e+1)*(header_height/2-140);$(".avatar").css("top",t+"px")}function name(e){var t=(e+1)*(header_height/2-100);$("#name").css({top:t+"px",opacity:clamp(1-e*2)})}function navbar(e){e>=1?$("body").addClass("fixnav"):$("body").removeClass("fixnav");e>0?$("body").addClass("showbrand"):$("body").removeClass("showbrand")}function scroll(){var e=$(window).scrollTop()/header_height;goggles(clamp(e*2));avatar(e*1.8);name(e*1.8);navbar(e)}var header_height=0,inital_motion=null,ma=null;$(function(){header_height=window.innerHeight-$("nav").height();$("header").css("height",header_height+"px");if(window.DeviceOrientationEvent){ma=moving_average(10);window.ondevicemotion=function(e){var t=e.accelerationIncludingGravity.z;inital_motion===null?inital_motion=t:goggles(clamp(ma(inital_motion-t)/3))}}if(!window.matchMedia("(max-width: 768px)").matches){$(".avatar").css("top",header_height/2-140+"px");scroll();$(window).resize(scroll).scroll(scroll)}else{$(".avatar").css("top",header_height/2-90+"px");$("#name").css("top",header_height/2-70+"px")}});